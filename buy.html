<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8"/>
  <meta name="viewport" content="width=device-width,initial-scale=1.0"/>
  <title>Buy Subscription â€“ Notelink</title>
  <style>
    body {
      margin: 0; font-family: 'Segoe UI', sans-serif; color: #fff;
      background: linear-gradient(135deg,#0e0e0e,#1a1a1a);
      display: flex; align-items: center; justify-content: center;
      min-height: 100vh; padding: 20px;
    }
    .box {
      width: 100%; max-width: 500px; padding: 32px; border-radius: 20px;
      background: #1f1f1f; box-shadow: 0 0 20px rgba(0,0,0,.6); text-align: center;
    }
    h2 { color: #00ffe0; margin: 0 0 8px; }
    p { margin: 6px 0 12px; font-size: 15px; }
    img.qr {
      width: 200px; height: 200px; border-radius: 12px; border: 2px solid #00ffe0;
      margin-bottom: 18px;
    }
    input, select {
      display: block; width: 100%; padding: 10px; margin-bottom: 12px;
      border: none; border-radius: 8px; background: #2a2a2a; color: #fff;
      font-size: 15px;
    }
    button {
      width: 100%; padding: 12px; border: none; border-radius: 8px; cursor: pointer;
      font-weight: 600; background: #00ffe0; color: #000; transition: background .25s;
    }
    button:hover { background: #00ccbb; }
    .note { font-size: 14px; color: #ffa; margin-top: 14px; }
    .btn-loading { pointer-events: none; opacity: .7; }
    .spinner {
      display: inline-block; width: 18px; height: 18px; border: 3px solid transparent;
      border-top: 3px solid #000; border-radius: 50%; animation: spin 1s linear infinite;
      vertical-align: middle; margin-left: 8px;
    }
    @keyframes spin { to { transform: rotate(360deg) } }
    .popup {
      position: fixed; inset: 0; background: rgba(0,0,0,.6);
      display: none; align-items: center; justify-content: center; z-index: 999;
    }
    .popup-content {
      background: #222; padding: 30px; border-radius: 16px; max-width: 90%;
      box-shadow: 0 0 25px rgba(0,255,255,.2); text-align: center;
    }
    .popup h3 { color: #00ffe0; margin: 0 0 10px; }
    .popup p { color: #ccc; margin: 0; }
  </style>
</head>
<body>
  <div class="box">
    <h2>Buy Subscription</h2>
    <p>Monthly Plan: <strong>â‚¹100</strong></p>
    <p>Scan & Pay using Google Pay:</p>
    <img src="scanner.png" alt="GPay QR Code" class="qr">
    <input id="name" placeholder="Your Name" required>
    <input id="class" placeholder="Your Class" required>
    <input id="school" placeholder="Your School" required>
    <input id="email" placeholder="Email Address" required>
    <input id="phone" placeholder="Phone Number (10 digits)" required>
    <select id="medium" required>
      <option value="">Select Medium</option>
      <option>English</option>
      <option>Hindi</option>
      <option>Assamese</option>
    </select>
    <button id="submitBtn" onclick="submitForm()">Submit</button>
    <div class="note">âœ… You will receive your access code within 12 hours.</div>
  </div>

  <div class="popup" id="popup">
    <div class="popup-content">
      <h3>ðŸŽ‰ Payment Submitted!</h3>
      <p>Thank you! Your form has been submitted successfully.<br>
      Your access code will be sent to your email within 12 hours.</p>
    </div>
  </div>

<script>
const SCRIPT_URL = "https://script.google.com/macros/s/AKfycbw2FT-A_XznLWLijWJI0oNYMRfyjX_IgsJoIKiIcTIIDzNONd7HHohVH7nIO6V5Ne_p/exec";

async function submitForm(){
  const btn = document.getElementById("submitBtn");
  const name = document.getElementById("name").value.trim();
  const className = document.getElementById("class").value.trim();
  const school = document.getElementById("school").value.trim();
  const email = document.getElementById("email").value.trim();
  const phone = document.getElementById("phone").value.trim();
  const medium = document.getElementById("medium").value;

  if(!name || !className || !school || !email || !phone || !medium){
    alert("Please fill in all fields.");
    return;
  }
  if(!/\S+@\S+\.\S+/.test(email)){
    alert("Enter a valid email.");
    return;
  }
  if(!/^\d{10}$/.test(phone)){
    alert("Phone number must be 10 digits.");
    return;
  }

  btn.classList.add("btn-loading");
  btn.innerHTML = 'Submitting <span class="spinner"></span>';

  const payload = {
    name,
    class: className,
    school,
    email,
    phone,
    medium
  };

  try {
    const res = await fetch(SCRIPT_URL, {
      method: "POST",
      body: JSON.stringify(payload)
    });

    if(res.ok){
      document.getElementById("popup").style.display = "flex";
      document.querySelectorAll("input, select").forEach(el => el.value = "");
    } else {
      alert("Error submitting form.");
    }
  } catch(err){
    alert("Network error.");
  } finally {
    btn.classList.remove("btn-loading");
    btn.textContent = "Submit";
  }
}
</script>
</body>
</html>
